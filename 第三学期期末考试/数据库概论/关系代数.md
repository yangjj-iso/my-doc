关系代数是数据库考试中**性价比极高**的部分：规则少、逻辑死、分值高。

只要搞定你列出的这四个符号，尤其是**除法 ($\div$)**，你基本拿捏了这部分的大题。我为你整理了**考试生存指南**，特别是针对最难懂的“除法”做了拆解。

---

### 一、 基础三巨头：$\sigma, \pi, \bowtie$ (快速扫盲)

这三个是构建复杂查询的砖块，考试时千万别把顺序搞反。
 
#### 1. 选择 ($\sigma$) —— 横着切 (选行)

- **功能：** 挑出满足条件的**行** (Tuple)。
    
- **SQL 对应：** `WHERE` 子句。
    
- **考点写法：** $\sigma_{条件}(表名)$
    
    - _例：_ 选出年龄大于20的学生 $\rightarrow \sigma_{Age > 20}(Student)$
        
- **坑点：** 条件里可以用 $\wedge$ (AND), $\vee$ (OR), $\neg$ (NOT)。比如：$\sigma_{Age>20 \wedge Dept='CS'}(Student)$。
    

#### 2. 投影 ($\pi$) —— 竖着切 (选列)

- **功能：** 挑出想要的**列** (Attribute)，并**自动去重**（这点和 SQL 的 `SELECT` 不同，SQL 不自动去重，除非加 `DISTINCT`）。
    
- **SQL 对应：** `SELECT` 子句。
    
- **考点写法：** $\pi_{列1, 列2}(表名)$
    
    - _例：_ 只要学生姓名和系别 $\rightarrow \pi_{Sname, Sdept}(Student)$
        
- **坑点：** 投影之后，原来的表结构就变了，只剩下你选的那几列。
    

#### 3. 连接 ($\bowtie$) —— 拼表

- **功能：** 把两张表根据**同名属性**值相等的原则拼起来，并**去掉重复的列**。
    
- **SQL 对应：** `NATURAL JOIN` (自然连接)。
    
- **考点写法：** $R \bowtie S$
    
- **坑点：**
    
    - 如果题目没说是“自然连接”，而是“等值连接” (比如 $R.A = S.B$)，要在 $\bowtie$ 下面写条件：$R \bowtie_{R.A=S.B} S$。
        
    - **笛卡尔积 ($\times$)：** 如果两张表没有任何关联条件强行拼在一起，就是笛卡尔积，这是所有连接的基础（行数相乘，列数相加）。
        

---

### 二、 大魔王：除法 ($\div$) —— 必考！

这是关系代数里最抽象的概念，也是用来区分“及格”和“高分”的考题。

#### 1. 直观理解 (人话版)

**除法解决的是“包含所有” (For All) 的问题。**

假设有：

- **被除数表 $R$ (考生-科目)：** 记录了谁考了什么课。
    
- **除数表 $S$ (必修课)：** 记录了所有必修课的名单。
    
- **结果 $R \div S$：** 考了**所有**必修课的考生名单。
    

> **口诀：** A $\div$ B = 在 A 中找到了 B 中**所有**对应的那个“前缀”。

#### 2. 考试典型题型 (背下来这个场景)

题目通常会给你三个表：

- 学生表 Student(Sno, Sname, Age)
    
- 课程表 Course(Cno, Cname)
    
- 选课表 SC(Sno, Cno, Grade)
    

**提问：** “查询选修了**所有**课程的学生学号。”

标准答案：

$$\pi_{Sno, Cno}(SC) \div \pi_{Cno}(Course)$$

**解题逻辑：**

1. **分母 (除数)** 是“所有课程”的集合 $\rightarrow \pi_{Cno}(Course)$
    
2. **分子 (被除数)** 是“学生-课程”的关系 $\rightarrow \pi_{Sno, Cno}(SC)$ (注意：这里必须把无关的列如Grade去掉，只留两个用来比较的列)
    
3. **相除** $\rightarrow$ 得到那个选了分母里所有元素的Sno。
    

#### 3. 除法的“硬核”定义 (高阶考点)

有些变态考题不让你直接用 $\div$，而是让你用基本运算 ($\pi, \times, -$) 来表示除法。

公式必须死记硬背：

$$R \div S = \pi_X(R) - \pi_X( (\pi_X(R) \times S) - R )$$

**公式解读 (逆向思维)：**

1. $\pi_X(R)$：先找出所有的候选人（所有人）。
    
2. $\pi_X(R) \times S$：让所有人跟所有课进行“强制配对”（假设大家都选了全课，造一个完美的假想表）。
    
3. $(\dots) - R$：用“完美表”减去“实际表 $R$”。剩下的就是**没有选全**的那些“缺课记录”。
    
4. $\pi_X(\dots)$：找出这些有“缺课记录”的人（不合格的人）。
    
5. $\pi_X(R) - \dots$：用“所有人”减去“不合格的人”，剩下的就是**选了所有课的人**。
    

---

### 三、 考场“三步走”解题套路 

拿到一道文字题，如何翻译成关系代数？

**例题：** 查询“计算机系(CS)”年龄小于20岁的学生学号和姓名。

第一步：由内而外，先做选择 ($\sigma$)

先把范围缩小，数据量越少越好。

- 条件：系别='CS' 且 年龄<20
    
- 表达式：$\sigma_{Sdept='CS' \wedge Age<20}(Student)$
    

第二步：确定需要的列，做投影 ($\pi$)

题目只要“学号”和“姓名”。

- 表达式：$\pi_{Sno, Sname}(\dots)$
    

第三步：组合

$$\pi_{Sno, Sname}(\sigma_{Sdept='CS' \wedge Age<20}(Student))$$

---

### 四、 综合实战 (含除法)

**题目：** 查询至少选修了学号为“95002”的学生所选修的**全部**课程的学生学号。

**分析思路：**

1. **“全部”** $\rightarrow$ 警钟敲响，这题必用**除法 ($\div$)**。
    
2. **除数 (B)：** 95002号学生选了哪些课？
    
    - $K = \pi_{Cno}(\sigma_{Sno='95002'}(SC))$
        
3. **被除数 (A)：** 大家的选课情况 (Sno, Cno)。
    
    - $R = \pi_{Sno, Cno}(SC)$
        
4. **做除法：**
    
    - $Result = R \div K$
        

最终答案：

$$\pi_{Sno, Cno}(SC) \div \pi_{Cno}(\sigma_{Sno='95002'}(SC))$$

---

**总结：**

1. 看到“WHERE”用 $\sigma$（下标写条件）。
    
2. 看到“SELECT”用 $\pi$（下标写列名）。
    
3. 看到“所有”、“全部”直接上 $\div$。
    
    - **分子**是“谁干了什么”。
        
    - **分母**是“全部的那一堆东西”。
        

掌握了这个逻辑，关系代数的大题你基本不会丢分。需要我再给你出一道题练练手吗？